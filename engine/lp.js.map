{"version":3,"sources":["bower_components/r5m-cms/js/modules/gallery/ui.js","bower_components/r5m-cms/js/modules/lib/closest.js","bower_components/r5m-cms/js/modules/lib/custom-event.js","bower_components/r5m-cms/js/modules/lib/dataset.js","bower_components/r5m-cms/js/modules/page/controller.js","bower_components/r5m-cms/js/modules/r5mDimmer/controller.js","bower_components/qwest/qwest.min.js","bower_components/r5m-cms/js/modules/feedback/controller.js","bower_components/r5m-cms/js/modules/gallery/controller.js","bower_components/r5m-cms/js/modules/lib/query-parser.js","bower_components/r5m-cms/js/modules/utm-content/controller.js","bower_components/r5m-cms/js/modules/carousel/carousel.js","bower_components/r5m-cms/js/modules/carousel/controller.js","bower_components/r5m-cms/js/modules/menu-highlighter/controller.js","bower_components/r5m-cms/js/app.js"],"names":["getChar","event","which","keyCode","String","fromCharCode","charCode","define","ELEMENT","matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","closest","selector","element","this","parentElement","w","window","CustomEvent","e","params","evt","bubbles","cancelable","detail","undefined","document","createEvent","initCustomEvent","prototype","Event","createElement","Element","Object","defineProperty","get","result","create","i","attributes","length","attr","specified","name","substring","prop","replace","m","p","toUpperCase","getAttribute","set","value","setAttribute","Page","title","init","dimmerElem","clickHandler","action","target","console","log","parentNode","removeChild","r5mDimmer","dimmer","getElementsByClassName","Error","showDimmer","closeDimmer","type","self","actionType","actionText","scrollbarWidth","innerWidth","documentElement","clientWidth","body","style","marginRight","classList","add","showDimmerWithActionType","remove","setTimeout","defaultText","elementsToHide","elementToShow","textField","getElementsByTagName","dispatchEvent","exports","module","amd","t","global","qwest","n","o","r","a","require","s","u","code","d","call","1","encodeURIComponent","toString","hasOwnProperty","join","param","2","setImmediate","process","nextTick","then","c","f","TypeError","apply","arguments","push","_dereq_","pinkyswear","jparam","defaultXdrResponseType","defaultDataType","limit","requests","request_stack","getXHR","XMLHttpRequest","ActiveXObject","xhr2","responseType","method","url","data","options","before","nativeResponseParsing","crossOrigin","xhr","xdr","timeoutInterval","aborted","attempts","headers","mimeTypes","text","xml","json","post","accept","j","serialized","response","sending","delayed","timeout_start","promise","complete","send","Date","getTime","XDomainRequest","open","async","user","password","withCredentials","setRequestHeader","onload","handleResponse","onerror","handleError","onreadystatechange","readyState","overrideMimeType","onprogress","ontimeout","timeout","shift","frame","display","appendChild","contentDocument","write","close","ct","getResponseHeader","indexOf","JSON","parse","responseText","eval","DOMParser","parseFromString","loadXML","test","status","statusText","cache","dataType","toLowerCase","parseInt","match","location","host","ArrayBuffer","Blob","Document","FormData","stringify","format","Accept","base","put","delete","map","setDefaultXdrResponseType","setDefaultDataType","jquery-param","FeedbackController","_service","r5m","app","FEEDBACK_SERVICE","forEach","querySelectorAll","formElem","_addModernPlaceholderHandler","_addSubmitHandler","_disableSubmit","form","submitElem","disabled","dataset","innerHTML","err","_enableSubmit","onsubmit","field","_reachYandexGoal","metrikaGoal","_showSuccessDialog","emailjs","FEEDBACK_TEMPLATE","_subject","FEEDBACK_EMAIL","_getMessage","content","addEventListener","_setupPlaceholder","tagName","modernPlaceholder","_resetFormValue","reset","goalName","metrikaConf","yandex","COUNTER_ID","reachGoal","DEFAULT_GOAL","ImageZoomer","imageClass","linkClass","containerElem","images","__rootElem","imageElems","imageElem","filter","img","href","alt","currentIndex","total","_onKeyHandler","_onKey","bind","slider","sliderImage","imageWrapper","imgCaption","imgCaptionContent","loader","sliderCaptionElem","preloaderImgElem","speedUpPreloaderElem","position","height","width","borderWidth","sliderImageElem","src","_createButtons","_registerEventHandlers","_registerKeyboardEvents","_unregisterKeyboardEvents","nav","prev","next","nextButtonElem","prevButtonElem","closeButtonElem","goodTarget","contains","preventDefault","showPicture","onclick","showNext","showPrev","curNumber","normalizeImageNumber","currentNumber","_oops","removeEventListener","imageNumber","_cacheImage","index","hrefOrIndex","curIndex","imageDesc","Ui","Gallery","_selector","_photos","$","pageElems","_updatePhotosList","galleryContainerElem","pageElem","pageId","imgElems","imgElem","fileName","QueryParser","queryString","query","varName","vars","split","pair","decodeURI","UtmContent","utmContent","queryParser","search","utmParamName","utmParam","utmElements","utmElement","Carousel","elem","settings","step","isRounded","rounded","classNames","leftButton","rightButton","item","contentWrapper","animation","carouselElem","items","realItemsCount","totalItemsCount","_createCloneNodes","_enableInfinityRoundLoop","_createNavigationButtons","startup","resize","currentSlide","carouselContentElem","moveToSlide","moveLeft","doNotClearInterval","_shiftCarousel","moveRight","carouselInterval","clearInterval","newIndex","slideNumber","totalItemsWidth","scrollWidth","newOffset","transform","carouselWrapper","firstElementChild","children","carouselItem","firstItem","lastItem","firstElemClone","cloneNode","lastElemClone","insertBefore","nextSibling","setInterval","moveToRealItem","transitionEnd","CarouselController","MenuHighlighter","linkElem","targetElem","protocol","pathname","applyClosestPolyfill","applyCustomEventPolyfill","modules","activeModules","moduleName","moduleClass","moduleAction"],"mappings":"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","file":"lp.js.map","sourcesContent":["define('r5m/modules/gallery/ui',[], function() {\n    var $ = document.querySelectorAll.bind(document);\n\n    /*\n    * images: {\n    \t\turl: оригинальное изображение\n    \t\t\talt: подпись\n    \t\t}\n    \t\tcurrentIndex: Current enlarged image's index (in the current gallery)\n    \t\ttotal : Total amount of images in the gallery\n    *\n    */\n    function ImageZoomer(imageClass, linkClass, containerElem) {\n        var self = this;\n        linkClass = linkClass || imageClass;\n        if (!imageClass || !linkClass) {\n            return;\n        }\n\n        this.images = [];\n        this.imageClass = imageClass;\n        this.linkClass = linkClass;\n        this.__rootElem = containerElem || document;\n        this.imageElems = this.__rootElem.getElementsByClassName(imageClass);\n        [].forEach.call(this.imageElems, function(imageElem) {\n            // Что же я хотел этим сказать? О_о\n            // ...ах да, если в массиве еще нет объектов с img == dataset.href, добавить его!\n            if (!self.images.filter(function(img) {\n                    return img.url == imageElem.dataset.href;\n                }).length) {\n                self.images.push({\n                    url: imageElem.dataset.href,\n                    alt: imageElem.dataset.alt || imageElem.getAttribute('alt') || \"\"\n                });\n            }\n        });\n\n        console.log(self.images);\n        this.currentIndex = 0;\n        this.total = this.images.length;\n        this._onKeyHandler = this._onKey.bind(this);\n    }\n\n    // create UI elements here\n    ImageZoomer.prototype.init = function() {\n        var slider = document.createElement('div');\n        var sliderImage = document.createElement('img');\n        var imageWrapper = document.createElement('figure');\n        var imgCaption = document.createElement('figcaption');\n        var imgCaptionContent = document.createElement('span');\n        var loader = document.createElement('div');\n        var self = this;\n        loader.innerHTML = '<i class=\"fa fa-spin fa-refresh\"></i>';\n        loader.classList.add('image-zoomer__loading');\n        loader.classList.add('image-zoomer__loading-visible');\n        this.loader = loader;\n\n        slider.classList.add('image-zoomer');\n        sliderImage.classList.add('image-zoomer__image');\n        sliderImage.classList.add('fade');\n\n        imageWrapper.appendChild(sliderImage);\n        imageWrapper.appendChild(imgCaption);\n\n        imgCaption.appendChild(imgCaptionContent);\n        imgCaption.appendChild(loader);\n        slider.appendChild(imageWrapper);\n        document.body.appendChild(slider);\n\n        this.slider = slider;\n        this.sliderCaptionElem = imgCaptionContent;\n        this.preloaderImgElem = document.createElement('img');\n\n\t\t\t\tthis.speedUpPreloaderElem = document.createElement('img');\n\t\t\t\tdocument.body.appendChild(this.speedUpPreloaderElem);\n\t\t\t\tthis.speedUpPreloaderElem.style.position = \"absolute\";\n\t\t\t\tthis.speedUpPreloaderElem.style.height = 0;\n\t\t\t\tthis.speedUpPreloaderElem.style.width = 0;\n\t\t\t\tthis.speedUpPreloaderElem.style.borderWidth = 0;\n\n        this.sliderImageElem = sliderImage;\n        this.preloaderImgElem.onload = function() {\n            sliderImage.classList.remove('fade-in');\n            sliderImage.classList.add('fade-out');\n            var img = this;\n            setTimeout(function() {\n                self.sliderImageElem.src = img.src;\n            }, 400);\n\n        };\n\n        this.sliderImageElem.onload = function() {\n            sliderImage.classList.remove('fade-out');\n            sliderImage.classList.add('fade-in');\n            loader.classList.remove('image-zoomer__loading-visible');\n        };\n\n        this._createButtons();\n        this._registerEventHandlers();\n\n    };\n\n    ImageZoomer.prototype.open = function() {\n        this._registerKeyboardEvents();\n        this.slider.classList.add('visible');\n    };\n\n    ImageZoomer.prototype.close = function() {\n        this._unregisterKeyboardEvents();\n        this.slider.classList.remove('visible');\n    };\n\n    ImageZoomer.prototype._createButtons = function() {\n        var nav = document.createElement('nav');\n        var prev = document.createElement('button');\n        var next = document.createElement('button');\n        var close = document.createElement('button');\n\n        prev.classList.add('image-zoomer__left');\n        next.classList.add('image-zoomer__right');\n        close.classList.add('image-zoomer__close');\n\n        next.innerHTML = '<div class=\"image-zoomer__text\">>></div>';\n        prev.innerHTML = '<div class=\"image-zoomer__text\"><<</div>';\n        close.innerHTML = '<i class=\"fa fa-close\"></i>';\n\n        nav.appendChild(prev);\n        nav.appendChild(next);\n        nav.appendChild(close);\n\n        this.nextButtonElem = next;\n        this.prevButtonElem = prev;\n        this.closeButtonElem = close;\n\n        this.slider.appendChild(nav);\n    };\n\n    ImageZoomer.prototype._registerEventHandlers = function() {\n        console.log('Registering Zoomer event handlers');\n        if (!this.imageClass || !this.linkClass) {\n            throw new Error('Error in gallery engine: missing requrired elements');\n        }\n        var self = this;\n        document.body.addEventListener('click', function(evt) {\n            var goodTarget = evt.target.classList.contains(self.imageClass) ? evt.target : evt.target.closest(\".\" + self.imageClass);\n            // console.log('Target: ', goodTarget, self.imageClass, evt.target);\n\n            if (!goodTarget || !self.__rootElem.contains(goodTarget)) {\n                return;\n            }\n\n            evt.preventDefault();\n            self.showPicture(goodTarget.dataset.href, goodTarget.dataset.alt);\n        });\n\n        this.nextButtonElem.onclick = function() {\n            self.showNext();\n        };\n\n        this.prevButtonElem.onclick = function() {\n            self.showPrev();\n        };\n\n        this.closeButtonElem.onclick = function() {\n            self.close();\n        };\n    };\n\n    ImageZoomer.prototype.showNext = function() {\n        var curNumber = this.normalizeImageNumber(this.currentNumber + 1);\n        this._oops = this.currentNumber == curNumber ? 1 : 0;\n        this.showPicture(curNumber);\n    };\n\n    ImageZoomer.prototype.showPrev = function() {\n        var curNumber = this.normalizeImageNumber(this.currentNumber - 1);\n        this._oops = this.currentNumber == curNumber ? -1 : 0;\n        this.showPicture(curNumber);\n    };\n\n    ImageZoomer.prototype._onKey = function(event) {\n        console.log(event.keyCode);\n        switch (+event.keyCode) {\n            case 37 /* left */ :\n                {\n                    this.showPrev();\n                    break;\n                }\n            case 39 /* right */ :\n                {\n                    this.showNext();\n                    break;\n                }\n            case 27 /* Esc */ :\n                {\n                    this.close();\n                }\n        }\n    };\n\n    ImageZoomer.prototype._registerKeyboardEvents = function() {\n        document.addEventListener('keydown', this._onKeyHandler);\n    };\n\n    ImageZoomer.prototype._unregisterKeyboardEvents = function() {\n        document.removeEventListener('keydown', this._onKeyHandler);\n    };\n\n    ImageZoomer.prototype.normalizeImageNumber = function(imageNumber) {\n        if (imageNumber >= this.total) {\n            imageNumber = this.total - 1;\n        }\n\n        if (imageNumber < 0) {\n            imageNumber = 0;\n        }\n\n        return imageNumber;\n    };\n\n    ImageZoomer.prototype._cacheImage = function(index) {\n        console.log(this.images[index].url);\n        this.speedUpPreloaderElem.src = this.images[index].url;\n    };\n\n    ImageZoomer.prototype.showPicture = function(hrefOrIndex) {\n        var self = this;\n        var href = (+hrefOrIndex || +hrefOrIndex === 0) ? this.images[+hrefOrIndex].url : hrefOrIndex;\n\n        if (window.innerWidth < 800) {\n            window.open(href);\n            return false;\n        }\n\n        var curIndex = 0;\n        for (var i = 0; i < this.images.length; i++) {\n            if (this.images[i].url == href) {\n                curIndex = i;\n            }\n        }\n\n        if (curIndex < this.images.length - 1) {\n            this._cacheImage(curIndex + 1);\n            if (curIndex > 0) {\n                this.speedUpPreloaderElem.onload = function() {\n                    self._cacheImage(curIndex - 1);\n\t\t\t\t\t\t\t\t\t\tthis.onload = function() {};\n                }\n            }\n        } else if (curIndex > 0) {\n            self._cacheImage(curIndex - 1);\n        }\n\n\n        if (!this.slider.classList.contains('visible')) {\n            this.open();\n        }\n\n        // if HREF is given, then navigation is Ok (we are not trying to go before 0 of after last image)\n        if (!(+hrefOrIndex || +hrefOrIndex === 0)) {\n            this._oops = 0;\n        }\n\n        if (this._oops) {\n            return false;\n        }\n\n        var alt = \"\";\n\n        if (href) {\n            this.loader.classList.add('image-zoomer__loading-visible');\n\n            this.images.forEach(function(imageDesc, i) {\n                if (href == imageDesc.url) {\n                    self.currentNumber = i;\n                    alt = imageDesc.alt;\n                }\n            });\n\n            self.prevButtonElem.classList[self.currentNumber === 0 ? \"add\" : \"remove\"]('inactive');\n            self.nextButtonElem.classList[self.currentNumber === self.total - 1 ? \"add\" : \"remove\"]('inactive');\n\n            self.preloaderImgElem.src = href;\n            if (alt) {\n                this.sliderCaptionElem.innerHTML = alt +\n                    ' (' +\n                    (self.currentNumber + 1) +\n                    '/' +\n                    self.total +\n                    ')';\n            } else {\n                this.sliderCaptionElem.innerHTML = 'Изображение ' +\n                    (self.currentNumber + 1) +\n                    ' из ' +\n                    self.total;\n            }\n        }\n\n        // document.querySelector('.preview img').src=\"img/\" + currentFolder + \"/\" + n + \".JPG\";\n        // document.querySelector('.preview').style.display = \"block\";\n        // currentPicture = n;\n\n        // var pn = imagesNumber[currentFolder];\n        // document.querySelector('.next').classList[currentPicture == pn ? \"add\" : \"remove\"]('inactive');\n        // document.querySelector('.prev').classList[currentPicture == 1 ? \"add\" : \"remove\"]('inactive');\n    };\n\n    return ImageZoomer;\n});\n\n// event.type должен быть keypress\nfunction getChar(event) {\n    if (event.which == null) { // IE\n        if (event.keyCode < 32) return null; // спец. символ\n        return String.fromCharCode(event.keyCode);\n    }\n\n    if (event.which != 0 && event.charCode != 0) { // все кроме IE\n        if (event.which < 32) return null; // спец. символ\n        return String.fromCharCode(event.which); // остальные\n    }\n\n    return null; // спец. символ\n}\n;\n","define('r5m/modules/lib/closest',[], function () {\n\t// Element.prototype.closest polyfill\n\treturn function (ELEMENT) {\n\t\tELEMENT.matches = ELEMENT.matches || ELEMENT.mozMatchesSelector || ELEMENT.msMatchesSelector || ELEMENT.oMatchesSelector || ELEMENT.webkitMatchesSelector;\n\t\tELEMENT.closest = ELEMENT.closest || function closest(selector) {\n\t\t\tvar element = this;\n\t\t\twhile (element) {\n\t\t\t\tif (element.matches(selector)) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\telement = element.parentElement;\n\t\t\t}\n\t\t\treturn element;\n\t\t};\n\t};\t\n});\n\n","define('r5m/modules/lib/custom-event',[], function() {\n  return function(w) {\n    try {\n      new window.CustomEvent(\"test\");\n    } catch (e) {\n      var CustomEvent = function(event, params) {\n        var evt;\n        params = params || {\n          bubbles: false,\n          cancelable: false,\n          detail: undefined\n        };\n\n        evt = document.createEvent(\"CustomEvent\");\n        evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n        return evt;\n      };\n\n      CustomEvent.prototype = window.Event.prototype;\n      w.CustomEvent = CustomEvent;\n    }\n  };\n});\n\n","define('r5m/modules/lib/dataset',[], function() {\n  if (!('dataset' in document.createElement('span')) &&\n      'Element' in window && Element.prototype && Object.defineProperty) {\n    Object.defineProperty(Element.prototype, 'dataset', { get: function() {\n      var result = Object.create(null);\n      for (var i = 0; i < this.attributes.length; ++i) {\n        var attr = this.attributes[i];\n        if (attr.specified && attr.name.substring(0, 5) === 'data-') {\n          (function(element, name) {\n            var prop = name.replace(/-([a-z])/g, function(m, p) {\n              return p.toUpperCase();\n            });\n            result[prop] = element.getAttribute('data-' + name); // Read-only, for IE8-\n            Object.defineProperty(result, prop, {\n              get: function() {\n                return element.getAttribute('data-' + name);\n              },\n              set: function(value) {\n                element.setAttribute('data-' + name, value);\n              }});\n          }(this, attr.name.substring(5)));\n        }\n      }\n      return result;\n    }});\n  }\n})\n;\n","define('r5m/modules/page/controller',[], function() {\n\n  function Page() {\n    this.title = 'page';\n    this.name = 'page';\n  }\n\n  Page.prototype.init = function(dimmerElem) {\n\n  };\n\n  Page.prototype.clickHandler = function(action, target) {\n    switch (action) {\n      case 'removeDOM':\n      console.log(target);\n        target.parentNode.removeChild(target);\n        break;\n\n      default:\n        return;\n    }\n  };\n\n  return new Page();\n});\n\n","define('r5m/modules/r5mDimmer/controller',[], function() {\n\n  function r5mDimmer() {\n    this.title = 'r5mDimmer';\n    this.name = 'Dimmer';\n  }\n\n  r5mDimmer.prototype.init = function(dimmerElem) {\n    this.dimmer = dimmerElem || document.getElementsByClassName('r5m-dimmer')[0];\n    if (!this.dimmer) {\n      throw new Error('Dimmer Element not found');\n    }\n  };\n\n  r5mDimmer.prototype.clickHandler = function(action, target) {\n    switch (action) {\n      case 'show':\n        this.showDimmer(target);\n        break;\n      case 'close':\n        this.closeDimmer();\n        break;\n      default:\n        return;\n    }\n  };\n\n  r5mDimmer.prototype.showDimmer = function(target, type) {\n    var self = this;\n    if (!this.dimmer) {\n      throw new Error('Dimmer Element not found');\n    }\n\n    var actionType = type || target.getAttribute('data-type');\n    var actionText = target.getAttribute('data-text');\n\n    var scrollbarWidth = window.innerWidth - document.documentElement.clientWidth;\n\n    if(!document.body.style.marginRight || document.body.style.marginRight == '0px') {\n      document.body.style.marginRight = scrollbarWidth + \"px\";\n    }\n\t\tdocument.body.classList.add('with-dimmer');\n\n    //по-умолчанию просто показываем dimmer\n    if (!actionType) {\n      self.dimmer.classList.add('r5m-dimmer-active');\n    } else {\n      //если есть специальный actionType\n      self.showDimmerWithActionType(actionType, actionText);\n    }\n  };\n\n  r5mDimmer.prototype.closeDimmer = function() {\n    if (!this.dimmer) {\n      return;\n    }\n\n    this.dimmer.classList.remove('r5m-dimmer-active');\n\t\tsetTimeout(function() {\n\t\t\tdocument.body.classList.remove('with-dimmer');\n\t\t\tdocument.body.style.marginRight = 0;\n\t\t}, 250);\n  };\n\n  r5mDimmer.prototype.showDimmerWithActionType = function(type, defaultText) {\n    // Скрываем все элементы внутри dimmer\n    defaultText = defaultText || '';\n    var elementsToHide = this.dimmer.getElementsByClassName('r5m-dimmer-wrapper');\n    for (var i = 0; i < elementsToHide.length; i++) {\n      elementsToHide[i].classList.add('is-hidden');\n    }\n\n    // показываем тот, который нам нужен\n    var elementToShow = this.dimmer.getElementsByClassName('r5m-dimmer-' + type)[0];\n    //console.log(\"e\", this.dimmer.getElementsByClassName('r5m-dimmer-' + type));\n    if (elementToShow) {\n      elementToShow.classList.remove('is-hidden');\n\n      // заполняем форму (ее Textarea) текстом по-умолчанию\n      var textField = elementToShow.getElementsByTagName('TEXTAREA')[0];\n      if (textField) {\n        textField.value = defaultText || '';\n        textField.dispatchEvent(new CustomEvent('input', {\n          bubbles: true,\n          cancelable: false\n        }));\n      }\n\n    }\n\n    this.dimmer.classList.add('r5m-dimmer-active');\n\n\n\n\n    // try {\n    // \tvar commentsTextElem = this.dimmer.getElementsByClassName('r5mFeedback__text')[0];\n    // \t// feedback.setText(commentsTextElem, defaultText);\n    // } catch (err) {\n    // \tconsole.error(err);\n    // }\n  };\n\n  return new r5mDimmer();\n});\n\n","!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define('vendor/qwest/qwest.min',[],e);else{var t;t=\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this,t.qwest=e()}}(function(){var define,module,exports;return function e(t,n,o){function r(i,a){if(!n[i]){if(!t[i]){var p=\"function\"==typeof require&&require;if(!a&&p)return p(i,!0);if(s)return s(i,!0);var u=new Error(\"Cannot find module '\"+i+\"'\");throw u.code=\"MODULE_NOT_FOUND\",u}var d=n[i]={exports:{}};t[i][0].call(d.exports,function(e){var n=t[i][1][e];return r(n?n:e)},d,d.exports,e,t,n,o)}return n[i].exports}for(var s=\"function\"==typeof require&&require,i=0;i<o.length;i++)r(o[i]);return r}({1:[function(e,t,n){!function(e){\"use strict\";var n=function(e){var t=function(e,t,n){n=\"function\"==typeof n?n():null===n?\"\":void 0===n?\"\":n,e[e.length]=encodeURIComponent(t)+\"=\"+encodeURIComponent(n)},n=function(e,o,r){var s,i,a;if(\"[object Array]\"===Object.prototype.toString.call(o))for(s=0,i=o.length;i>s;s++)n(e+\"[\"+(\"object\"==typeof o[s]?s:\"\")+\"]\",o[s],r);else if(o&&\"[object Object]\"===o.toString())for(a in o)o.hasOwnProperty(a)&&(e?n(e+\"[\"+a+\"]\",o[a],r,t):n(a,o[a],r,t));else if(e)t(r,e,o);else for(a in o)t(r,a,o[a]);return r};return n(\"\",e,[]).join(\"&\").replace(/%20/g,\"+\")};\"object\"==typeof t&&\"object\"==typeof t.exports?t.exports=n:\"function\"==typeof define&&define.amd?define([],function(){return n}):e.param=n}(this)},{}],2:[function(e,t,n){!function(e){function t(e){return\"function\"==typeof e}function n(e){return\"object\"==typeof e}function o(e){\"undefined\"!=typeof setImmediate?setImmediate(e):\"undefined\"!=typeof process&&process.nextTick?process.nextTick(e):setTimeout(e,0)}var r;e[0][e[1]]=function s(e){var i,a=[],p=[],u=function(e,t){return null==i&&null!=e&&(i=e,a=t,p.length&&o(function(){for(var e=0;e<p.length;e++)p[e]()})),i};return u.then=function(u,d){var c=s(e),f=function(){function e(o){var s,i=0;try{if(o&&(n(o)||t(o))&&t(s=o.then)){if(o===c)throw new TypeError;s.call(o,function(){i++||e.apply(r,arguments)},function(e){i++||c(!1,[e])})}else c(!0,arguments)}catch(a){i++||c(!1,[a])}}try{var o=i?u:d;t(o)?e(o.apply(r,a||[])):c(i,a)}catch(s){c(!1,[s])}};return null!=i?o(f):p.push(f),c},e&&(u=e(u)),u}}(\"undefined\"==typeof t?[window,\"pinkySwear\"]:[t,\"exports\"])},{}],qwest:[function(_dereq_,module,exports){module.exports=function(){var global=window||this,pinkyswear=_dereq_(\"pinkyswear\"),jparam=_dereq_(\"jquery-param\"),defaultXdrResponseType=\"json\",defaultDataType=\"post\",limit=null,requests=0,request_stack=[],getXHR=function(){return global.XMLHttpRequest?new global.XMLHttpRequest:new ActiveXObject(\"Microsoft.XMLHTTP\")},xhr2=\"\"===getXHR().responseType,qwest=function(method,url,data,options,before){method=method.toUpperCase(),data=data||null,options=options||{};var nativeResponseParsing=!1,crossOrigin,xhr,xdr=!1,timeoutInterval,aborted=!1,attempts=0,headers={},mimeTypes={text:\"*/*\",xml:\"text/xml\",json:\"application/json\",post:\"application/x-www-form-urlencoded\"},accept={text:\"*/*\",xml:\"application/xml; q=1.0, text/xml; q=0.8, */*; q=0.1\",json:\"application/json; q=1.0, text/*; q=0.8, */*; q=0.1\"},i,j,serialized,response,sending=!1,delayed=!1,timeout_start,promise=pinkyswear(function(e){if(e[\"catch\"]=function(t){return e.then(null,t)},e.complete=function(t){return e.then(t,t)},\"pinkyswear\"in options)for(i in options.pinkyswear)e[i]=options.pinkyswear[i];return e.send=function(){if(!sending){if(requests==limit)return void request_stack.push(e);if(++requests,sending=!0,timeout_start=(new Date).getTime(),xhr=getXHR(),crossOrigin&&(\"withCredentials\"in xhr||!global.XDomainRequest||(xhr=new XDomainRequest,xdr=!0,\"GET\"!=method&&\"POST\"!=method&&(method=\"POST\"))),xdr?xhr.open(method,url):(xhr.open(method,url,options.async,options.user,options.password),xhr2&&options.async&&(xhr.withCredentials=options.withCredentials)),!xdr)for(var t in headers)headers[t]&&xhr.setRequestHeader(t,headers[t]);if(xhr2&&\"document\"!=options.responseType&&\"auto\"!=options.responseType)try{xhr.responseType=options.responseType,nativeResponseParsing=xhr.responseType==options.responseType}catch(n){}xhr2||xdr?(xhr.onload=handleResponse,xhr.onerror=handleError):xhr.onreadystatechange=function(){4==xhr.readyState&&handleResponse()},\"auto\"!=options.responseType&&\"overrideMimeType\"in xhr&&xhr.overrideMimeType(mimeTypes[options.responseType]),before&&before(xhr),xdr?(xhr.onprogress=function(){},xhr.ontimeout=function(){},xhr.onerror=function(){},setTimeout(function(){xhr.send(\"GET\"!=method?data:null)},0)):xhr.send(\"GET\"!=method?data:null)}},e}),handleResponse=function(){var i,responseType;if(--requests,sending=!1,(new Date).getTime()-timeout_start>=options.timeout)return void(options.attempts&&++attempts==options.attempts?promise(!1,[new Error(\"Timeout (\"+url+\")\"),xhr,response]):promise.send());request_stack.length&&request_stack.shift().send();try{if(nativeResponseParsing&&\"response\"in xhr&&null!==xhr.response)response=xhr.response;else if(\"document\"==options.responseType){var frame=document.createElement(\"iframe\");frame.style.display=\"none\",document.body.appendChild(frame),frame.contentDocument.open(),frame.contentDocument.write(xhr.response),frame.contentDocument.close(),response=frame.contentDocument,document.body.removeChild(frame)}else{if(responseType=options.responseType,\"auto\"==responseType)if(xdr)responseType=defaultXdrResponseType;else{var ct=xhr.getResponseHeader(\"Content-Type\")||\"\";responseType=ct.indexOf(mimeTypes.json)>-1?\"json\":ct.indexOf(mimeTypes.xml)>-1?\"xml\":\"text\"}switch(responseType){case\"json\":try{response=\"JSON\"in global?JSON.parse(xhr.responseText):eval(\"(\"+xhr.responseText+\")\")}catch(e){throw\"Error while parsing JSON body : \"+e}break;case\"xml\":try{global.DOMParser?response=(new DOMParser).parseFromString(xhr.responseText,\"text/xml\"):(response=new ActiveXObject(\"Microsoft.XMLDOM\"),response.async=\"false\",response.loadXML(xhr.responseText))}catch(e){response=void 0}if(!response||!response.documentElement||response.getElementsByTagName(\"parsererror\").length)throw\"Invalid XML\";break;default:response=xhr.responseText}}if(\"status\"in xhr&&!/^2|1223/.test(xhr.status))throw xhr.status+\" (\"+xhr.statusText+\")\";promise(!0,[xhr,response])}catch(e){promise(!1,[e,xhr,response])}},handleError=function(e){--requests,promise(!1,[new Error(\"Connection aborted\"),xhr,null])};switch(options.async=\"async\"in options?!!options.async:!0,options.cache=\"cache\"in options?!!options.cache:!1,options.dataType=\"dataType\"in options?options.dataType.toLowerCase():defaultDataType,options.responseType=\"responseType\"in options?options.responseType.toLowerCase():\"auto\",options.user=options.user||\"\",options.password=options.password||\"\",options.withCredentials=!!options.withCredentials,options.timeout=\"timeout\"in options?parseInt(options.timeout,10):3e4,options.attempts=\"attempts\"in options?parseInt(options.attempts,10):1,i=url.match(/\\/\\/(.+?)\\//),crossOrigin=i&&(i[1]?i[1]!=location.host:!1),\"ArrayBuffer\"in global&&data instanceof ArrayBuffer?options.dataType=\"arraybuffer\":\"Blob\"in global&&data instanceof Blob?options.dataType=\"blob\":\"Document\"in global&&data instanceof Document?options.dataType=\"document\":\"FormData\"in global&&data instanceof FormData&&(options.dataType=\"formdata\"),options.dataType){case\"json\":data=null!==data?JSON.stringify(data):data;break;case\"post\":data=jparam(data)}if(options.headers){var format=function(e,t,n){return t+n.toUpperCase()};for(i in options.headers)headers[i.replace(/(^|-)([^-])/g,format)]=options.headers[i]}return\"Content-Type\"in headers||\"GET\"==method||options.dataType in mimeTypes&&mimeTypes[options.dataType]&&(headers[\"Content-Type\"]=mimeTypes[options.dataType]),headers.Accept||(headers.Accept=options.responseType in accept?accept[options.responseType]:\"*/*\"),crossOrigin||\"X-Requested-With\"in headers||(headers[\"X-Requested-With\"]=\"XMLHttpRequest\"),options.cache||\"Cache-Control\"in headers||(headers[\"Cache-Control\"]=\"no-cache\"),\"GET\"==method&&data&&\"string\"==typeof data&&(url+=(/\\?/.test(url)?\"&\":\"?\")+data),options.async&&promise.send(),promise};return{base:\"\",get:function(e,t,n,o){return qwest(\"GET\",this.base+e,t,n,o)},post:function(e,t,n,o){return qwest(\"POST\",this.base+e,t,n,o)},put:function(e,t,n,o){return qwest(\"PUT\",this.base+e,t,n,o)},\"delete\":function(e,t,n,o){return qwest(\"DELETE\",this.base+e,t,n,o)},map:function(e,t,n,o,r){return qwest(e.toUpperCase(),this.base+t,n,o,r)},xhr2:xhr2,limit:function(e){limit=e},setDefaultXdrResponseType:function(e){defaultXdrResponseType=e.toLowerCase()},setDefaultDataType:function(e){defaultDataType=e.toLowerCase()}}}()},{\"jquery-param\":1,pinkyswear:2}]},{},[1,2])(\"qwest\")});\n","define('r5m/modules/feedback/controller',[\n  'vendor/qwest/qwest.min',\n  'r5m/modules/r5mDimmer/controller'\n], function(xhr, dimmer) {\n  'use strict';\n\n  function FeedbackController() {\n    // this.formElem = formElem;\n    this._service = 'formspree';\n    if (window.r5m && window.r5m.app.FEEDBACK_SERVICE) {\n      this._service = window.r5m.app.FEEDBACK_SERVICE;\n    }\n  }\n\n  FeedbackController.prototype.init = function() {\n    [].forEach.call(document.querySelectorAll('.r5mFeedback__form'), function(formElem) {\n      this._addModernPlaceholderHandler(formElem);\n      this._addSubmitHandler(formElem);\n\n    }, this);\n\n    // Masker(document.querySelectorAll('[name=\"phone\"]')).maskPattern(\"(999) 999-9999\");\n\n    // [].forEach.call(document.querySelectorAll('[name=\"phone\"]'), function(elem) {\n    //\n    //   // new Formatter(elem, {\n    //   //   'pattern': '+7({{999}})-{{999}}-{{9999}}',\n    //   //   'persistent': true\n    //   // });\n    //   // window.scrollTo(0, 0);\n    // });\n  };\n\n  FeedbackController.prototype._disableSubmit = function(form) {\n    try {\n      var submitElem = form.getElementsByClassName('submit-button')[0];\n      submitElem.disabled = true;\n      submitElem.dataset.value = submitElem.innerHTML;\n      submitElem.innerHTML = 'Подождите пожалуйста...';\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  FeedbackController.prototype._enableSubmit = function(form) {\n    try {\n      var submitElem = form.getElementsByClassName('submit-button')[0];\n      submitElem.disabled = false;\n      if (submitElem.dataset.value) {\n        submitElem.innerHTML = submitElem.dataset.value;\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  FeedbackController.prototype._addSubmitHandler = function(form) {\n    var self = this;\n\n    form.onsubmit = function() {\n      var data = {};\n      self._disableSubmit(form);\n      ['name', 'phone', 'email', 'text', 'page'].forEach(function(field) {\n        if (form[field]) {\n          data[field] = form[field].value;\n        }\n      });\n\n      self._reachYandexGoal(form.dataset.metrikaGoal);\n\n      self.send(data).then(function() {\n        self._showSuccessDialog(form, 'thanks');\n        self._enableSubmit(form);\n      }, function() {\n        self._showSuccessDialog(form, 'oops');\n        self._enableSubmit(form);\n      });\n\n      return false;\n    };\n  };\n\n  FeedbackController.prototype.send = function(data) {\n    if (!data) {\n      throw new Error('Data required to send message');\n    }\n\n    switch (this._service) {\n      case 'emailjs':\n        {\n          try {\n            return window.emailjs.send(\"info\", window.r5m.app.FEEDBACK_TEMPLATE, data);\n          } catch (err) {\n            console.log('error sending with emailjs.com');\n          }\n\n          break;\n        }\n\n      case 'formspree':\n      default:\n        {\n          data._subject = 'Сообщение на сайте';\n          return xhr.post('https://formspree.io/' + (window.r5m.app.FEEDBACK_EMAIL || 'milikhin@gmail.com'), data, {\n            cache: true,\n            headers: {\n              'Accept': 'application/json'\n            }\n          });\n        }\n    }\n  };\n\n  FeedbackController.prototype._getMessage = function(data) {\n    if (!data) {\n      throw new Error('Data required to generate message');\n    }\n    var content = '';\n    for (var i in data) {\n      content += '<li>' + data[i] + '</li>';\n    }\n\n    return '\\\n\t\t\t<p>Это сообщение было сформировано с помощью формы обратной связи на сайте.</p>\\\n\t\t\t<ul>\\\n\t\t\t\t' + content + '\\\n\t\t\t</ul>\\\n\t\t';\n  };\n\n  FeedbackController.prototype._showSuccessDialog = function(form, type) {\n    // console.log(form, type);\n    dimmer.showDimmer(form, type);\n  };\n\n  FeedbackController.prototype._addModernPlaceholderHandler = function(form) {\n    var self = this;\n\n    form.addEventListener('input', function(e) {\n      self._setupPlaceholder(e.target);\n    });\n\n    setTimeout(function() {\n      [].forEach.call(form.getElementsByTagName('textarea'), self._setupPlaceholder);\n      [].forEach.call(form.getElementsByTagName('input'), self._setupPlaceholder);\n    }, 0);\n  };\n\n  FeedbackController.prototype._setupPlaceholder = function(target) {\n    if (target.tagName != 'INPUT' && target.tagName != 'TEXTAREA') {\n      return;\n    }\n    if (target.parentNode.tagName != 'LABEL') {\n      return;\n    }\n    var modernPlaceholder = target.parentNode.getElementsByClassName('r5mFeedback__placeholder')[0];\n    if (!modernPlaceholder) return;\n\n    if (target.value) {\n      target.classList.add('r5mFeedback__input-with-modern-placeholder');\n      modernPlaceholder.classList.add('r5mFeedback__placeholder-top');\n    } else {\n      target.classList.remove('r5mFeedback__input-with-modern-placeholder');\n      modernPlaceholder.classList.remove('r5mFeedback__placeholder-top');\n    }\n  };\n\n  FeedbackController.prototype._resetFormValue = function(form) {\n    var self = this;\n    form.reset();\n\n    [].forEach.call(form.getElementsByTagName('textarea'), self._setupPlaceholder);\n    [].forEach.call(form.getElementsByTagName('input'), self._setupPlaceholder);\n  };\n\n  FeedbackController.prototype._reachYandexGoal = function(goalName) {\n    //нужно убедиться что метрика точно есть и что цель точно есть\n    try {\n      var metrikaConf = window.r5m.yandex;\n      // console.log(\"yaCounter\" + metrikaConf.COUNTER_ID);\n      window[\"yaCounter\" + metrikaConf.COUNTER_ID].reachGoal(goalName || metrikaConf.DEFAULT_GOAL);\n    } catch (e) {\n      console.log('Error in metrika', e);\n    }\n\n  };\n\n  return new FeedbackController();\n});\n\n","define('r5m/modules/gallery/controller',[\n\t'./ui'\n], function (Ui) {\n\n\tvar $ = document.querySelectorAll.bind(document);\n\n\tfunction Gallery() {\n\t\tthis.title = 'gallery';\n\t\tthis.name = 'Галерея изображений';\n\t\t// this.model = model;\n\n\t\tthis._selector = '.r5m-custom-page, .gallery-container';\n\t\tthis._photos = {};\n\n\t}\n\n\tGallery.prototype.init = function () {\n\t\tthis.pageElems = $(this._selector);\n\t\tthis._updatePhotosList();\n\n\t\t[].forEach.call($(this._selector), function(galleryContainerElem) {\n\t\t\tnew Ui('r5m-gallery-img', 'r5m-gallery-link', galleryContainerElem).init();\n\t\t}, this);\n\n\t};\n\n\tGallery.prototype._updatePhotosList = function () {\n\t\t[].forEach.call(this.pageElems, function (pageElem) {\n\t\t\tthis._photos[pageElem.dataset.pageId] = [];\n\n\t\t\tvar imgElems = pageElem.getElementsByClassName('r5m-gallery-img');\n\t\t\t[].forEach.call(imgElems, function (imgElem) {\n\t\t\t\t// console.log(imgElem);\n\t\t\t\tthis._photos[pageElem.dataset.pageId].push(imgElem.dataset.fileName);\n\t\t\t}, this);\n\t\t}, this);\n\n\t\tconsole.log('photos now: ', this._photos);\n\t};\n\n\treturn new Gallery();\n});\n\n","define('r5m/modules/lib/query-parser',[], function () {\n\tfunction QueryParser(queryString) {\n\t\tthis.query = queryString.indexOf('?') == 0 ? queryString.substring(1) : queryString;\n\t}\n\n\tQueryParser.prototype.get = function (varName) {\n\t\tvar query = this.query;\n\t\tvar vars = query.split(\"&\");\n\t\tfor (var i = 0; i < vars.length; i++) {\n\t\t\tvar pair = vars[i].split(\"=\");\n\t\t\tif (pair[0] == varName) {\n\t\t\t\treturn decodeURI(pair[1]);\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t};\n\n\treturn QueryParser;\n});\n\n","define('r5m/modules/utm-content/controller',['r5m/modules/lib/query-parser'], function(QueryParser) {\n\n  function UtmContent() {\n    this.title = 'utmcontent';\n\t\tthis.name = 'Utm-based content';\n\n    this.params = window.r5m.utmContent;\n    this.queryParser = new QueryParser(window.location.search);\n  }\n\n  UtmContent.prototype.init = function() {\n    for(var utmParamName in this.params) {\n      var utmParam = this.params[utmParamName];\n      var utmElements = document.querySelectorAll('.' + utmParamName);\n      for(var i in utmParam) {\n        console.log(this.queryParser.get('utm_term'));\n        if(this.queryParser.get('utm_term') && ~this.queryParser.get('utm_term').toLowerCase().indexOf(i)) {\n          [].forEach.call(utmElements, function(utmElement) {\n            utmElement.innerHTML = utmParam[i];\n          }, this);\n        }\n      }\n    }\n  };\n\n  return new UtmContent\n});\n\n","/**\n * @module Carousel.\n * @autor mikhael\n * @version 1.0*\n * @param options - options object.\n *     options.rounded - if true carousel will be infinite, if false - will stop at last/first slides\n */\n\ndefine('r5m/modules/carousel/carousel',[], function () {\n\t\"use strict\";\n\n\tfunction Carousel(elem, options) {\n\t\tvar self = this;\n\t\tthis.settings = {\n\t\t\tstep: options ? options.step || 1 : 1,\n\t\t\tisRounded: options ? options.rounded : true,\n\t\t\tclassNames: {\n\t\t\t\tleftButton: \"carousel__left-button\",\n\t\t\t\trightButton: \"carousel__right-button\",\n\t\t\t\tcontent: \"carousel__content\",\n\t\t\t\titem: \"carousel__item\",\n\t\t\t\tcontentWrapper: \"carousel__inner-wrapper\",\n\t\t\t\tanimation: \"carousel__animation\"\n\t\t\t}\n\t\t};\n\n\t\tthis.carouselElem = elem;\n\n\t\tthis.init();\n\n\t\tthis.items = elem.getElementsByClassName(this.settings.classNames.item);\n\t\tthis.realItemsCount = this.items.length;\n\t\tthis.totalItemsCount = this.items.length + (this.settings.isRounded ? 2 : 0);\n\n\t\tif (this.settings.isRounded) {\n\t\t\tthis._createCloneNodes();\n\t\t\tthis._enableInfinityRoundLoop();\n\t\t}\n\n\t\tthis._createNavigationButtons();\n\t\tthis.startup();\n\n\t\twindow.addEventListener('resize', this.resize.bind(this));\n\t}\n\n\tCarousel.prototype.resize = function () {\n\t\tvar currentSlide = +this.carouselContentElem.getAttribute('data-carousel-currentSlide');\n\t\tthis.carouselContentElem.classList.remove(this.settings.classNames.animation);\n\t\tthis.moveToSlide(currentSlide);\n\t};\n\n\tCarousel.prototype.moveLeft = function(doNotClearInterval) {\n    this._shiftCarousel(-1, !!+doNotClearInterval);\n  };\n\n  Carousel.prototype.moveRight = function(doNotClearInterval) {\n    this._shiftCarousel(+1, !!+doNotClearInterval);\n  };\n\n\tCarousel.prototype._shiftCarousel = function (step, doNotClearInterval) {\n\t\tif (!doNotClearInterval && this.carouselInterval) {\n      clearInterval(this.carouselInterval);\n    }\n\n\t\tvar currentIndex = +this.carouselContentElem.getAttribute('data-carousel-currentSlide');\n\t\tvar newIndex = currentIndex + step;\n\n\t\tthis.carouselContentElem.classList.add(this.settings.classNames.animation);\n\t\tthis.moveToSlide(newIndex);\n\t};\n\n\tCarousel.prototype.moveToSlide = function (slideNumber) {\n\t\tvar totalItemsWidth = this.carouselContentElem.scrollWidth;\n\t\tvar newOffset = -totalItemsWidth / this.totalItemsCount * slideNumber;\n\n\t\tif (newOffset > 0) return; // the first slide\n\t\tif (newOffset <= -totalItemsWidth || newOffset >= this.carouselElem.clientWidth) return; //the last slide\n\n\t\tthis.carouselContentElem.style.transform = 'translateX(' + newOffset + 'px)';\n\t\tthis.carouselContentElem.setAttribute('data-carousel-offset', newOffset);\n\t\tthis.carouselContentElem.setAttribute('data-carousel-currentSlide', slideNumber);\n\t};\n\n\tCarousel.prototype.init = function () {\n\t\tvar settings = this.settings;\n\t\tvar elem = this.carouselElem;\n\n\t\t//create wrapper\n\t\tvar carouselWrapper = document.createElement('div');\n\t\tcarouselWrapper.appendChild(elem.firstElementChild);\n\t\tcarouselWrapper.classList.add(settings.classNames.contentWrapper);\n\n\t\tcarouselWrapper.firstElementChild.classList.add(settings.classNames.content);\n\t\t[].forEach.call(carouselWrapper.firstElementChild.children, function (carouselItem) {\n\t\t\tcarouselItem.classList.add(settings.classNames.item);\n\t\t});\n\t\telem.appendChild(carouselWrapper);\n\n\t\tthis.carouselContentElem = this.carouselElem.getElementsByClassName(this.settings.classNames.content)[0];\n\n\t};\n\n\tCarousel.prototype._createCloneNodes = function () {\n\t\tvar firstItem = this.items[0];\n\t\tvar lastItem = this.items[this.items.length - 1];\n\n\t\tvar firstElemClone = firstItem.cloneNode(true);\n\t\tvar lastElemClone = lastItem.cloneNode(true);\n\n\t\tfirstElemClone.classList.add(\"first-clone\");\n\t\tlastElemClone.classList.add(\"last-clone\");\n\n\t\tthis.carouselContentElem.insertBefore(lastElemClone, firstItem);\n\t\tthis.carouselContentElem.insertBefore(firstElemClone, lastItem.nextSibling);\n\t};\n\n\tCarousel.prototype._createNavigationButtons = function () {\n\t\t//setup Left/Right button click handlers\n\t\tthis.carouselElem.getElementsByClassName(this.settings.classNames.leftButton)[0].addEventListener('click', this.moveLeft.bind(this));\n\t\tthis.carouselElem.getElementsByClassName(this.settings.classNames.rightButton)[0].addEventListener('click', this.moveRight.bind(this));\n\t};\n\n\tCarousel.prototype.startup = function () {\n\t\tvar self = this;\n\t\tthis.carouselContentElem.classList.remove(this.settings.classNames.animation);\n\t\tthis.moveToSlide(this.settings.isRounded ? 1 : 0);\n\t\tthis.carouselInterval = setInterval(function() {\n        self.moveRight(true);\n    }, 10000)\n\t};\n\n\tCarousel.prototype._enableInfinityRoundLoop = function () {\n\n\t\tvar self = this;\n\t\tvar moveToRealItem = (function () {\n\t\t\tvar currentIndex = +this.carouselContentElem.getAttribute('data-carousel-currentSlide');\n\t\t\tif (currentIndex === 0) {\n\t\t\t\tthis.carouselContentElem.classList.remove(this.settings.classNames.animation);\n\t\t\t\tthis.moveToSlide(self.totalItemsCount - 2);\n\t\t\t} else if (currentIndex === this.totalItemsCount - 1) {\n\t\t\t\tthis.carouselContentElem.classList.remove(this.settings.classNames.animation);\n\t\t\t\tthis.moveToSlide(1);\n\t\t\t}\n\t\t}).bind(this);\n\t\t//moveToRealItem = moveToRealItem.bind(this);\n\n\t\tif (window.transitionEnd) {\n\t\t\twindow.transitionEnd(this.carouselContentElem).bind(moveToRealItem);\n\t\t} else {\n\t\t\tthis.carouselContentElem.addEventListener('transitionend', moveToRealItem);\n\t\t}\n\t};\n\n\treturn Carousel;\n});\n\n","define('r5m/modules/carousel/controller',['./carousel'], function (Carousel) {\n  console.log(Carousel);\n\n  function CarouselController() {}\n\n\tCarouselController.prototype.init = function () {\n\t\t[].forEach.call(document.querySelectorAll('.carousel'), function (elem) {\n\t\t\tnew Carousel(elem);\n\t\t});\n\t};\n\n\treturn new CarouselController();\n});\n\n","define('r5m/modules/menu-highlighter/controller',[], function() {\n  function MenuHighlighter() {\n    this.name = 'MenuHighlighter';\n  };\n\n  MenuHighlighter.prototype.init = function() {\n    [].forEach.call(document.querySelectorAll('a'), function(linkElem) {\n      var targetElem = linkElem.closest('.r5m-nav-link') || linkElem;\n\n      if(linkElem.href == window.location.protocol + \"//\" + window.location.host + window.location.pathname) {\n        targetElem.classList.add('active');\n      }\n    });\n  };\n\n  return new MenuHighlighter();\n});\n\n","define('r5m/app',[\n\t'r5m/modules/lib/closest',\n\t'r5m/modules/lib/custom-event',\n\t'r5m/modules/lib/dataset',\n\t'r5m/modules/page/controller',\n\t'r5m/modules/r5mDimmer/controller',\n\t'r5m/modules/feedback/controller',\n\t'r5m/modules/gallery/controller',\n\t'r5m/modules/utm-content/controller',\n\t'r5m/modules/carousel/controller',\n\t'r5m/modules/menu-highlighter/controller'\n\n], function (applyClosestPolyfill, applyCustomEventPolyfill) {\n\n\treturn function (modules) {\n\t\tvar activeModules = [];\n\t\tapplyClosestPolyfill(window.Element.prototype);\n\t\tapplyCustomEventPolyfill(window);\n\n\t\tif (!modules) {\n\t\t\treturn;\n\t\t}\n\n\t\tmodules.forEach(function (moduleName) {\n\t\t\trequire(['r5m/modules/' + moduleName + '/controller'], function (moduleClass) {\n\t\t\t\tif (!~activeModules.indexOf(moduleClass)) {\n\t\t\t\t\tactiveModules.push(moduleClass);\n\t\t\t\t\tmoduleClass.init();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t//обработчик на весь документ. Нас интересуют только элементы с data-action, по которым мы поймем, какой модуль с каким action вызвать. Например 'tour-create'\n\t\tdocument.addEventListener('click', function (e) {\n\t\t\tvar target;\n\n\t\t\tif (e.target.dataset && e.target.dataset.action) {\n\t\t\t\ttarget = e.target;\n\t\t\t} else {\n\t\t\t\ttarget = e.target.closest('.r5m-action');\n\t\t\t}\n\n\t\t\tif (!target) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar action = target.dataset.action;\n\t\t\t// Отметаем все без data-action\n\t\t\tif (!action || (typeof (action) != 'string')) return;\n\n\t\t\t// разбиваем по тире на [модуль, действие]. Если не вышло - в топку\n\t\t\tvar moduleAction = action.split('-');\n\t\t\tif (moduleAction.length < 2) return;\n\n\t\t\te.preventDefault();\n\t\t\tconsole.log(moduleAction);\n\n\t\t\tactiveModules.forEach(function (module) {\n\t\t\t\tif (moduleAction[0] == module.title && module.clickHandler) {\n\t\t\t\t\tmodule.clickHandler(moduleAction[1], target); //передаем только action в модуль\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t};\n});\n\n"]}